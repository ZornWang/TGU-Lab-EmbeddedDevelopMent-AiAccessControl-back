(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[643],{5966:function(W,T,e){"use strict";var E=e(22122),g=e(81253),f=e(67294),n=e(21257),Z=["fieldProps","proFieldProps"],o=["fieldProps","proFieldProps"],b="text",F=function(v){var P=v.fieldProps,l=v.proFieldProps,s=(0,g.Z)(v,Z);return f.createElement(n.Z,(0,E.Z)({mode:"edit",valueType:b,fieldProps:P,filedConfig:{valueType:b},proFieldProps:l},s))},j=function(v){var P=v.fieldProps,l=v.proFieldProps,s=(0,g.Z)(v,o);return f.createElement(n.Z,(0,E.Z)({mode:"edit",valueType:"password",fieldProps:P,proFieldProps:l,filedConfig:{valueType:b}},s))},d=F;d.Password=j,d.displayName="ProFormComponent",T.Z=d},90672:function(W,T,e){"use strict";var E=e(22122),g=e(81253),f=e(67294),n=e(21257),Z=["fieldProps","proFieldProps"],o=function(F,j){var d=F.fieldProps,R=F.proFieldProps,v=(0,g.Z)(F,Z);return f.createElement(n.Z,(0,E.Z)({ref:j,mode:"edit",valueType:"textarea",fieldProps:d,proFieldProps:R},v))};T.Z=f.forwardRef(o)},53618:function(W){W.exports={main:"main___3po6t",headerList:"headerList___XFj0C",stepDescription:"stepDescription___aQ0ch",pageHeader:"pageHeader___3SmF9",moreInfo:"moreInfo___2iXCS"}},54823:function(W,T,e){"use strict";e.d(T,{Z:function(){return _}});var E=e(57338),g=e(25084),f=e(3182),n=e(57337),Z=e(94043),o=e.n(Z),b=e(6604),F=e(16894),j=e(8870),d=e(76649),R={REGISTER:"\u4E0A\u7535\u6CE8\u518C",DETECT_FACE:"\u8BC6\u522B\u4EBA\u8138",OPEN:"\u5F00\u95E8",WARNING:"\u8BBE\u5907\u62A5\u8B66",ERROR:"\u8BBE\u5907\u62A5\u9519"};function v(c,I){return P.apply(this,arguments)}function P(){return P=(0,f.Z)(o().mark(function c(I,S){return o().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,d.WY)("/device-log",(0,j.Z)({method:"GET",params:(0,j.Z)({},I)},S||{})));case 1:case"end":return D.stop()}},c)})),P.apply(this,arguments)}var l=e(67294),s;(function(c){c.REGISTER="REGISTER",c.DETECT_FACE="DETECT_FACE",c.OPEN="OPEN",c.WARNING="WARNING",c.ERROR="ERROR"})(s||(s={}));var C;(function(c){c.FACE="face",c.PASSWORD="password"})(C||(C={}));var y=e(71092),u=e(12968),ee=e(62462),a=e(85893),Q=function(I){var S=I.log,t=S.payload,D=[{title:"Face Token",dataIndex:"faceToken"},{title:"\u56FE\u7247",dataIndex:"imageID",render:function($,m){return(0,a.jsx)(ee.Z,{width:200,src:"/api/device-log/image/".concat(m.imageID)})}}];return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(y.Z,{column:1,title:"\u4EBA\u8138\u4FE1\u606F\u8BE6\u60C5",request:(0,f.Z)(o().mark(function L(){return o().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",{data:t||{}});case 1:case"end":return m.stop()}},L)})),columns:D})})},X=Q,N;(function(c){c.FACE="face",c.PASSWORD="password"})(N||(N={}));var re=function(I){var S=I.log,t=S.payload,D=[{title:"\u5F00\u95E8\u65B9\u5F0F",dataIndex:"method",render:function($,m){return m.method===N.FACE?(0,a.jsx)("span",{children:"\u4EBA\u8138\u5F00\u95E8"}):m.method===N.PASSWORD?(0,a.jsx)("span",{children:"\u5BC6\u7801\u5F00\u95E8"}):(0,a.jsx)("span",{children:"-"})}}];return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(y.Z,{column:1,title:"\u4EBA\u8138\u4FE1\u606F\u8BE6\u60C5",request:(0,f.Z)(o().mark(function L(){return o().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",{data:t||{}});case 1:case"end":return m.stop()}},L)})),columns:D})})},V=re,J=function(I){var S=I.showDevice,t=I.showGuest,D=I.deviceID,L=I.guestID,$=I.mini,m=(0,l.useRef)(),ne=(0,l.useState)(),K=(0,n.Z)(ne,2),i=K[0],U=K[1],x=(0,l.useState)(!1),Y=(0,n.Z)(x,2),h=Y[0],z=Y[1],k=[{title:"LOG ID",dataIndex:"id"},{title:"\u4E8B\u4EF6",dataIndex:"event",valueEnum:R},S&&{title:"\u8BBE\u5907",dataIndex:["device","name"],search:!1,render:function(A,p){return p.device?(0,a.jsx)("a",{onClick:function(){d.m8.push("/device/".concat(p.deviceId))},children:A}):(0,a.jsx)(a.Fragment,{children:"-"})}},{title:"\u8BBE\u5907 ID",dataIndex:"deviceId",initialValue:D,hideInTable:!0},t&&{title:"\u4EBA\u5458",dataIndex:["guest","name"],search:!1,render:function(A,p){return p.guest?(0,a.jsx)("a",{onClick:function(){d.m8.push("/guest/".concat(p.guestId))},children:A}):(0,a.jsx)(a.Fragment,{children:"-"})}},{title:"\u4EBA\u5458 ID",dataIndex:"guestId",initialValue:L,hideInTable:!0},{title:"\u64CD\u4F5C\u65F6\u95F4",valueType:"dateTime",dataIndex:"createdAt",search:!1},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",hideInDescriptions:!0,render:function(A,p){return[(0,a.jsx)("a",{onClick:function(){z(!0),U(p)},children:"\u8BE6\u60C5"},"config")]}}].filter(Boolean);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.ZP,{headerTitle:"\u65E5\u5FD7\u5217\u8868",actionRef:m,rowKey:"id",search:{labelWidth:120,filterType:$?"light":"query"},request:function(){var B=(0,f.Z)(o().mark(function A(p){return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=b.S,r.next=3,v(p);case 3:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 5:case"end":return r.stop()}},A)}));return function(A){return B.apply(this,arguments)}}(),columns:k}),(0,a.jsx)(g.Z,{width:600,visible:h,onClose:function(){U(void 0),z(!1)},closable:!1,children:(i==null?void 0:i.id)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{column:2,title:"\u65E5\u5FD7\u8BE6\u60C5",request:(0,f.Z)(o().mark(function B(){return o().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",{data:i||{}});case 1:case"end":return p.stop()}},B)})),params:{id:i==null?void 0:i.id},columns:k}),(i==null?void 0:i.event)===s.DETECT_FACE&&(0,a.jsx)(X,{log:i}),(i==null?void 0:i.event)===s.OPEN&&(0,a.jsx)(V,{log:i})]})})]})};J.defaultProps={showDevice:!0,showGuest:!0};var _=J},90309:function(W,T,e){"use strict";e.r(T),e.d(T,{default:function(){return ne}});var E=e(58024),g=e(39144),f=e(98858),n=e(4914),Z=e(62350),o=e(75443),b=e(57663),F=e(71577),j=e(57337),d=e(8870),R=e(34792),v=e(48086),P=e(3182),l=e(402),s=e(59289),C=e(94043),y=e.n(C),u=e(64335),ee=e(70844),a=e(21349),Q=e(67294),X=e(76649),N=e(32241);function re(K){return V.apply(this,arguments)}function V(){return V=(0,P.Z)(y().mark(function K(i){return y().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,X.WY)("/device/".concat(i)));case 1:case"end":return x.stop()}},K)})),V.apply(this,arguments)}var J=e(53618),_=e.n(J),c=e(37476),I=e(20108),S=e(54823),t=e(85893),D=s.Z.Text,L=[{key:"tab1",tab:"\u5BA1\u8BA1\u65E5\u5FD7"}],$=function(){var K=(0,P.Z)(y().mark(function i(U){var x;return y().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return x=v.default.loading("\u6B63\u5728\u4FEE\u6539"),h.prev=1,h.next=4,(0,N.Vx)((0,d.Z)({},U));case 4:return x(),v.default.success("\u4FEE\u6539\u6210\u529F"),h.abrupt("return",!0);case 9:return h.prev=9,h.t0=h.catch(1),x(),v.default.error("\u4FEE\u6539\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"),h.abrupt("return",!1);case 14:case"end":return h.stop()}},i,null,[[1,9]])}));return function(U){return K.apply(this,arguments)}}(),m=function(i){var U=parseInt(i.match.params.id,10),x=(0,Q.useState)({operationKey:"tab1",tabActiveKey:"detail"}),Y=(0,j.Z)(x,2),h=Y[0],z=Y[1],k=(0,Q.useState)(!1),B=(0,j.Z)(k,2),A=B[0],p=B[1],w=(0,X.QT)(function(){return re(U)}),r=w.data,te=w.loading,ae=w.refresh,se=function(O){z((0,d.Z)((0,d.Z)({},h),{},{tabActiveKey:O}))},ue=function(O){z((0,d.Z)((0,d.Z)({},h),{},{operationKey:O}))},ie=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u8BE5\u8BBE\u5907\uFF1F",onConfirm:(0,P.Z)(y().mark(function G(){var O;return y().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,N.Od)({id:r.id});case 2:return O=M.sent,O&&(v.default.success("\u5220\u9664\u6210\u529F"),history.back()),M.abrupt("return",O);case 5:case"end":return M.stop()}},G)})),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(F.Z,{danger:!0,children:"\u5220\u9664"})},"delete"),(0,t.jsx)(F.Z,{type:"primary",onClick:function(){return p(!0)},children:"\u7F16\u8F91"})]}),le=(0,t.jsx)(u.Z.Consumer,{children:function(O){var q=O.isMobile;return(0,t.jsxs)(n.Z,{className:_().headerList,size:"small",column:q?1:2,children:[(0,t.jsx)(n.Z.Item,{label:"\u8BBE\u5907\u540D",children:r==null?void 0:r.name}),(r==null?void 0:r.aliyunDeviceName)&&(0,t.jsx)(n.Z.Item,{label:"DeviceName",children:(0,t.jsx)(D,{copyable:!0,ellipsis:!0,children:r==null?void 0:r.aliyunDeviceName})}),(r==null?void 0:r.aliyunProductKey)&&(0,t.jsx)(n.Z.Item,{label:"ProductKey",children:(0,t.jsx)(D,{copyable:!0,ellipsis:!0,children:r==null?void 0:r.aliyunProductKey})}),(r==null?void 0:r.aliyunDeviceSecret)&&(0,t.jsx)(n.Z.Item,{label:"DeviceSecret",children:(0,t.jsx)(D,{copyable:!0,ellipsis:!0,children:r==null?void 0:r.aliyunDeviceSecret})}),(r==null?void 0:r.aliyunIotId)&&(0,t.jsx)(n.Z.Item,{label:"IotId",children:(0,t.jsx)(D,{copyable:!0,ellipsis:!0,children:r==null?void 0:r.aliyunIotId})})]})}});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.ZP,{onBack:function(){history.back()},loading:te,title:"\u8BBE\u5907\u8BE6\u60C5",extra:ie,className:_().pageHeader,content:le,tabActiveKey:h.tabActiveKey,onTabChange:se,tabList:[{key:"detail",tab:"\u8BE6\u60C5"}],children:(0,t.jsx)("div",{className:_().main,children:h.tabActiveKey==="detail"&&(r==null?void 0:r.id)&&(0,t.jsx)(a.Z,{children:(0,t.jsx)(g.Z,{className:_().tabsCard,bordered:!1,tabList:L,onTabChange:ue,style:{marginTop:"16px"},children:(0,t.jsx)(S.Z,{deviceID:r.id,mini:!0,showDevice:!1})})})})}),A&&(0,t.jsx)(c.Z,{title:"\u4FEE\u6539\u8BBE\u5907\u4FE1\u606F",width:"736px",visible:A,onVisibleChange:p,initialValues:r,onFinish:function(){var G=(0,P.Z)(y().mark(function O(q){var M;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,$((0,d.Z)((0,d.Z)({},q),{},{id:r.id}));case 2:return M=H.sent,M&&(ae(),p(!1)),H.abrupt("return",M);case 5:case"end":return H.stop()}},O)}));return function(O){return G.apply(this,arguments)}}(),children:(0,t.jsx)(I.Z,{isEdit:!0})})]})},ne=m},20108:function(W,T,e){"use strict";var E=e(5966),g=e(90672),f=e(67294),n=e(85893),Z=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{label:"\u8BBE\u5907\u540D",name:"name",rules:[{required:!0,message:"\u8FD9\u662F\u5FC5\u586B\u9879"}]}),(0,n.jsx)(g.Z,{label:"\u63CF\u8FF0",name:"description"})]})};T.Z=Z},32241:function(W,T,e){"use strict";e.d(T,{U2:function(){return o},Vx:function(){return F},IH:function(){return d},Od:function(){return v}});var E=e(8870),g=e(3182),f=e(94043),n=e.n(f),Z=e(76649);function o(l,s){return b.apply(this,arguments)}function b(){return b=(0,g.Z)(n().mark(function l(s,C){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,Z.WY)("/device",(0,E.Z)({method:"GET",params:(0,E.Z)({},s)},C||{})));case 1:case"end":return u.stop()}},l)})),b.apply(this,arguments)}function F(l,s){return j.apply(this,arguments)}function j(){return j=(0,g.Z)(n().mark(function l(s,C){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,Z.WY)("/device",(0,E.Z)({data:s,method:"PUT"},C||{})));case 1:case"end":return u.stop()}},l)})),j.apply(this,arguments)}function d(l,s){return R.apply(this,arguments)}function R(){return R=(0,g.Z)(n().mark(function l(s,C){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,Z.WY)("/device",(0,E.Z)({data:s,method:"POST"},C||{})));case 1:case"end":return u.stop()}},l)})),R.apply(this,arguments)}function v(l,s){return P.apply(this,arguments)}function P(){return P=(0,g.Z)(n().mark(function l(s,C){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,Z.WY)("/device",(0,E.Z)({data:s,method:"DELETE"},C||{})));case 1:case"end":return u.stop()}},l)})),P.apply(this,arguments)}},6604:function(W,T,e){"use strict";e.d(T,{S:function(){return E}});var E=function(f){var n=f.data;return{data:n.result,total:n.total,success:!0,pageSize:n.pageSize,current:n.current}}}}]);
